{"version":3,"sources":["firebase.js","contexts/AuthContext.js","components/Chats.js","components/Login.js","components/App.js","index.js"],"names":["auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","AuthContext","React","createContext","AuthProvider","_ref","children","_useState","useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","user","setUser","history","useHistory","useEffect","onAuthStateChanged","push","value","createElement","Provider","Chats","useContext","handleLogout","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","signOut","stop","apply","arguments","getFile","_ref2","_callee2","url","response","data","_context2","fetch","sent","blob","abrupt","File","type","_x","axios","get","headers","process","email","uid","then","catch","formdata","FormData","append","photoURL","avatar","name","post","error","console","log","className","onClick","ChatEngine","height","projectID","userName","userSecret","Login","id","signInWithRedirect","GoogleAuthProvider","GoogleOutlined","FacebookAuthProvider","FacebookOutlined","App","style","fontFamily","Router","Switch","Route","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.86404846.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\n\r\nexport const auth = firebase.initializeApp({\r\n    apiKey: \"AIzaSyBFdM8BBDMxjC1bECQIek2F-tp1_LOPecE\",\r\n    authDomain: \"mychatapp-7bb4d.firebaseapp.com\",\r\n    projectId: \"mychatapp-7bb4d\",\r\n    storageBucket: \"mychatapp-7bb4d.appspot.com\",\r\n    messagingSenderId: \"842207173795\",\r\n    appId: \"1:842207173795:web:99943dcb6391f5d2cd3316\"\r\n}).auth();","import React, { useContext, useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [loading, setLoading] = useState(true);\r\n    const [user, setUser] = useState(null);\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        auth.onAuthStateChanged((user) => {\r\n            setUser(user);\r\n            setLoading(false);\r\n            if(user) history.push('/chats');\r\n        })\r\n    }, [user, history]);\r\n\r\n    const value = { user };\r\n\r\n    return(\r\n        <AuthContext.Provider value = {value}>\r\n            {!loading && children}\r\n        </AuthContext.Provider>\r\n    )\r\n}","import React, { useRef, useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { ChatEngine } from 'react-chat-engine';\r\nimport { auth } from '../firebase';\r\n\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport axios from 'axios'\r\n\r\nconst Chats = () => {\r\n    const history = useHistory();\r\n    const { user } = useAuth();\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const handleLogout = async () => {\r\n        await auth.signOut();\r\n\r\n        history.push('/');\r\n    }\r\n\r\n    const getFile = async (url) => {\r\n        const response = await fetch(url);\r\n        const data = await response.blob();\r\n\r\n        return new File([data], \"userPhoto.jpg\", { type: 'image/jpeg' })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(!user){\r\n            history.push('/');\r\n            return;\r\n        }\r\n\r\n        axios.get('https://api.chatengine.io/users/me', {\r\n            headers: {\r\n                \"project-id\": process.env.REACT_APP_CHAT_ENGINE_ID,\r\n                \"user-name\": user.email,\r\n                \"user-secret\": user.uid,\r\n            }\r\n        })\r\n        .then(() => {\r\n            setLoading(false);\r\n        })\r\n        .catch(() => {\r\n            let formdata = new FormData();\r\n            formdata.append('email', user.email);\r\n            formdata.append('username', user.email);\r\n            formdata.append('secret', user.uid);\r\n\r\n            getFile(user.photoURL)\r\n                .then((avatar) => {\r\n                    formdata.append('avatar', avatar, avatar.name);\r\n\r\n                    axios.post('https://api.chatengine.io/users', \r\n                                formdata, \r\n                                { headers: { \"private-key\": process.env.REACT_APP_CHAT_ENGINE_KEY } }\r\n                    )\r\n                    .then(() => setLoading(false))\r\n                    .catch((error) => console.log(error))\r\n                })\r\n        })\r\n    }, [user, history]);\r\n\r\n    if(!user || loading) return 'Loading... Please Wait!';\r\n\r\n    return (\r\n        <div className='chats-page'>\r\n            <div className='nav-bar'>\r\n                <div className='logo-tab'>\r\n                    MyChatApp\r\n                </div>\r\n                <div onClick={handleLogout} className='logout-tab'>\r\n                    Logout\r\n                </div>\r\n            </div>\r\n            <ChatEngine\r\n                height = \"calc(100vh - 66px)\"\r\n                // projectID = \"ad1f7d12-2f03-4698-8bf5-97ea1d9b92b1\"\r\n                projectID = {process.env.REACT_APP_CHAT_ENGINE_ID}\r\n                userName = {user.email}\r\n                userSecret = {user.uid}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chats;","import React from 'react'\r\nimport { GoogleOutlined, FacebookOutlined } from '@ant-design/icons';\r\nimport \"firebase/app\";\r\n\r\nimport { auth } from '../firebase';\r\nimport firebase from 'firebase/app';\r\n\r\nconst Login = () => {\r\n    return (\r\n        <div id = \"login-page\">\r\n            <div id = \"login-card\">\r\n                <h2> Welcome to the CHAT!</h2>\r\n\r\n                <div \r\n                    className='login-button google'\r\n                    onClick={() => auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())}\r\n                >\r\n                    <GoogleOutlined /> Sign In using Google Account\r\n                </div>\r\n\r\n                <br /> <br/>\r\n\r\n                <div \r\n                    className='login-button facebook'\r\n                    onClick={() => auth.signInWithRedirect(new firebase.auth.FacebookAuthProvider())}\r\n                >\r\n                    <FacebookOutlined /> Sign In using Facebook Account\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import React from \"react\"\n\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\n\nimport { AuthProvider } from \"../contexts/AuthContext\"\n\nimport Chats from \"./Chats\"\nimport Login from \"./Login\"\n\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Avenir' }}>\n      <Router>\n        <AuthProvider>\n          <Switch>\n            <Route path=\"/chats\" component={Chats} />\n            <Route path=\"/\" component={Login} />\n          </Switch>\n        </AuthProvider>\n      </Router>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}